<template>
  <div class="container">
    <section id="intro">
      <div id="intro-info">
        <h1>Cheng Ling Jie (Jeremy) <span style="font-size:0.7em;">(曾令杰)</span></h1>
        <h2>PhD, MPH, BSN (Hons), RN</h2>
        <p class="intro-description">
Dr Cheng Ling Jie is a Postdoctoral Fellow at the <a href="https://www.npeu.ox.ac.uk/about/people/ling-jie-cheng-1110">National Perinatal Epidemiology Unit</a>, University of Oxford, supported by the prestigious <a href="https://www.moe.gov.sg/news/press-releases/20240814-28-young-singaporeans-receive-awards-to-pursue-careers-in-academia-and-research">Singapore Teaching and Academic Research Talent (START) Award</a>. He also holds an academic appointment as Senior Tutor at the <a href="https://medicine.nus.edu.sg/nursing/our-people/our-faculty/teaching-faculty/cheng-ling-jie/">Alice Lee Centre for Nursing Studies</a>, Yong Loo Lin School of Medicine, National University of Singapore.
        </p>
        
        <p class="intro-description">
His research focuses on health economics and outcomes research, with the goal of improving healthcare decision-making. He has led or contributed to projects securing over SGD 1.6 million in funding and has published more than 70 peer-reviewed articles. He has also supervised over 30 undergraduate and 8 postgraduate theses.
        </p>
        
        <p class="intro-description">
Internationally, Dr Cheng serves as a <a href="https://systematicreviewsjournal.biomedcentral.com/about/editorial-board">Senior Editor</a> for Systematic Reviews and an <a href="https://link.springer.com/journal/11136/editorial-board">Associate Editor</a> for Quality of Life Research. He is a member of the EuroQol Group Association, ISPOR, ISOQOL, and the PROMIS Health Organization, and a founding member of the EuroQol PhD Network. He is also a regular peer reviewer for leading journals in public health, nursing, and health outcomes research.
        </p>
      </div>

      <div class="intro-img-block">
        <img src="/img/CHENG-LING-JIE_NUS-OAM-9.jpg" alt="Dr Cheng Ling Jie (Jeremy)" />
        
        <div class="social-links-container">
          <div class="social-links">
            <a href="https://www.linkedin.com/in/chenglingjie/" class="social-link linkedin" target="_blank" rel="noopener noreferrer">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19a.66.66 0 000 .14V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z"/>
              </svg>
            </a>
            
            <a href="https://www.researchgate.net/profile/Ling-Jie-Cheng?ev=hdr_xprf" class="social-link researchgate" target="_blank" rel="noopener noreferrer">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.586 0H4.414A4.414 4.414 0 000 4.414v15.172A4.414 4.414 0 004.414 24h15.172A4.414 4.414 0 0024 19.586V4.414A4.414 4.414 0 0019.586 0zM8.707 19.79c-1.297 0-2.274-.702-2.274-1.297 0-.351.351-.702.702-.702.702 0 1.297.351 1.297 1.053 0 .351-.351.946-.351.946s1.648-1.405 1.648-3.243c0-1.892-1.405-3.594-3.594-3.594-1.892 0-3.243 1.351-3.243 3.243 0 1.648 1.297 2.946 2.946 2.946zM15.334 15.5c0 .405-.324.729-.729.729s-.729-.324-.729-.729v-2.7c0-.405.324-.729.729-.729s.729.324.729.729v2.7zm.729-4.374c0 .405-.324.729-.729.729s-.729-.324-.729-.729v-1.458c0-.405.324-.729.729-.729s.729.324.729.729v1.458zm.729-3.24c0 .405-.324.729-.729.729s-.729-.324-.729-.729V6.27c0-.405.324-.729.729-.729s.729.324.729.729v1.616z"/>
              </svg>
            </a>
            
            <a href="https://scholar.google.com/citations?user=IjgLMBkAAAAJ&hl=en" class="social-link scholar" target="_blank" rel="noopener noreferrer">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M5.242 13.769L0 9.5 12 0l12 9.5-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a7 7 0 1 0 0 14 7 7 0 0 0 0-14z"/>
              </svg>
            </a>
            
            <a href="https://twitter.com/JeremyChengLJ" class="social-link twitter" target="_blank" rel="noopener noreferrer">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
              </svg>
            </a>
          </div>
          
          <div class="contact-link-row">
            <button @click="toggleChatWidget" class="social-link contact">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
              </svg>
              <span>Chat with Dr Cheng</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <section id="education" class="highlight-section">
      <h2>Education & Training</h2>
      <ul class="education-list">
        <li><strong>Postdoctoral Fellowship</strong>, University of Oxford</li>
        <li><strong>PhD in Public Health</strong>, National University of Singapore</li>
        <li><strong>Master of Public Health</strong>, National University of Singapore</li>
        <li><strong>Bachelor of Science (Nursing) (Honours)</strong>, National University of Singapore</li>
      </ul>
    </section>

    <section id="appointments" class="highlight-section appointments">
      <h2>Academic Appointments</h2>
      <ul class="appointment-list">
        <li><strong>Postdoctoral Fellow (NUS-OPF)</strong> [2024-Present], University of Oxford</li>
        <li><strong>Senior Tutor (NUS-OPF)</strong> [2024-Present], National University of Singapore</li>
        <li><strong>Research Associate</strong> [2021-2024], National University of Singapore</li>
        <li><strong>PhD Candidate</strong> [2021-2024], National University of Singapore</li>
      </ul>
    </section>

    <section id="contact">
      <h2>Contact & Locations</h2>
      <div class="two-cols">
        <div class="contact-location">
          <strong>National Perinatal Epidemiology Unit (NPEU)</strong><br>
          Nuffield Department of Population Health<br>
          University of Oxford<br>
          Old Road Campus<br>
          Oxford OX3 7LF<br>
          United Kingdom
        </div>
        <div class="contact-location">
          <strong>Alice Lee Centre for Nursing Studies (NUS Nursing)</strong><br>
          Yong Loo Lin School of Medicine<br>
          Centre for Translational Medicine<br>
          Block MD6, Level 5<br>
          14 Medical Drive<br>
          Singapore 117599
        </div>
      </div>
    </section>

    <!-- Chat Widget -->
    <div v-if="showChatWidget" class="chat-widget-overlay" @click="closeChatWidget">
      <div class="chat-widget" @click.stop>
        <div class="chat-header">
          <div class="chat-header-info">
            <div class="chat-avatar">
              <img src="/img/CHENG-LING-JIE_NUS-OAM-9.jpg" alt="Dr Cheng">
            </div>
            <div class="chat-header-text">
              <h3>Dr Cheng Ling Jie</h3>
              <span class="chat-status">{{ isOnline ? 'Online' : 'Leave a message' }}</span>
            </div>
          </div>
          <div class="chat-header-actions">
            <button @click="toggleMode" class="mode-toggle" :title="currentMode === 'chat' ? 'Switch to Message' : 'Switch to Chat'">
              <svg v-if="currentMode === 'chat'" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
              <svg v-else viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
              </svg>
            </button>
            <button @click="closeChatWidget" class="close-btn">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Chat Mode -->
        <div v-if="currentMode === 'chat'" class="chat-content">
          <div class="chat-messages" ref="chatMessages">
            <div v-for="message in messages" :key="message.id" class="message" :class="{ 'user': message.sender === 'user', 'assistant': message.sender === 'assistant' }">
              <div class="message-content">
                <p>{{ message.text }}</p>
                <span class="message-time">{{ message.time }}</span>
              </div>
            </div>
            <div v-if="isTyping" class="message assistant">
              <div class="message-content">
                <div class="typing-indicator">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
              </div>
            </div>
          </div>
          <div class="chat-input-area">
            <div class="chat-input-container">
              <input 
                v-model="currentMessage" 
                @keyup.enter="sendMessage"
                @input="handleInput"
                placeholder="Type your message..." 
                class="chat-input"
                :disabled="isTyping"
              >
              <button @click="sendMessage" class="send-btn" :disabled="!currentMessage.trim() || isTyping">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Message Mode -->
        <div v-else class="message-form">
          <div class="form-group">
            <label for="name">Name *</label>
            <input 
              v-model="messageForm.name" 
              type="text" 
              id="name" 
              placeholder="Your full name"
              required
            >
          </div>
          <div class="form-group">
            <label for="email">Email *</label>
            <input 
              v-model="messageForm.email" 
              type="email" 
              id="email" 
              placeholder="your.email@example.com"
              required
            >
          </div>
          <div class="form-group">
            <label for="subject">Subject *</label>
            <input 
              v-model="messageForm.subject" 
              type="text" 
              id="subject" 
              placeholder="Research collaboration, academic inquiry, etc."
              required
            >
          </div>
          <div class="form-group">
            <label for="message">Message *</label>
            <textarea 
              v-model="messageForm.message" 
              id="message" 
              rows="4" 
              placeholder="Please describe your inquiry in detail..."
              required
            ></textarea>
          </div>
          <button @click="sendFormMessage" class="submit-btn" :disabled="!isFormValid || isSubmitting">
            <span v-if="isSubmitting">Sending...</span>
            <span v-else>Send Message</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Floating Chat Button -->
    <button v-if="!showChatWidget" @click="toggleChatWidget" class="floating-chat-btn">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
      </svg>
      <div class="chat-notification" v-if="hasNewMessage">1</div>
    </button>
  </div>
</template>

<script>
export default {
  name: 'Home',
  data() {
    return {
      showChatWidget: false,
      currentMode: 'chat', // 'chat' or 'message'
      isOnline: true,
      isTyping: false,
      isSubmitting: false,
      hasNewMessage: false,
      currentMessage: '',
      messages: [
        {
          id: 1,
          sender: 'assistant',
          text: 'Hello! I\'m Dr Cheng\'s AI assistant. How can I help you today? I can answer questions about research, collaborations, or help you get in touch.',
          time: this.getCurrentTime()
        }
      ],
      messageForm: {
        name: '',
        email: '',
        subject: '',
        message: ''
      },
      messageIdCounter: 2
    }
  },
  computed: {
    isFormValid() {
      return this.messageForm.name.trim() && 
             this.messageForm.email.trim() && 
             this.messageForm.subject.trim() && 
             this.messageForm.message.trim();
    }
  },
  methods: {
    toggleChatWidget() {
      this.showChatWidget = !this.showChatWidget;
      if (this.showChatWidget) {
        this.hasNewMessage = false;
        this.$nextTick(() => {
          this.scrollToBottom();
        });
      }
    },
    closeChatWidget() {
      this.showChatWidget = false;
    },
    toggleMode() {
      this.currentMode = this.currentMode === 'chat' ? 'message' : 'chat';
    },
    getCurrentTime() {
      return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    },
    async sendMessage() {
      if (!this.currentMessage.trim() || this.isTyping) return;

      // Add user message
      const userMessage = {
        id: this.messageIdCounter++,
        sender: 'user',
        text: this.currentMessage,
        time: this.getCurrentTime()
      };
      this.messages.push(userMessage);
      
      const messageToSend = this.currentMessage;
      this.currentMessage = '';
      
      this.$nextTick(() => {
        this.scrollToBottom();
      });

      // Simulate typing
      this.isTyping = true;
      
      try {
        // Using Claude API through window.claude.complete
        const response = await window.claude.complete(`You are Dr Cheng Ling Jie's AI assistant. You help visitors to his academic website by answering questions about his research, background, and facilitating contact. 

Context about Dr Cheng:
- Postdoctoral Fellow at National Perinatal Epidemiology Unit, University of Oxford
- Senior Tutor at Alice Lee Centre for Nursing Studies, National University of Singapore  
- PhD, MPH, BSN (Hons), RN
- Research focus: health economics and outcomes research
- Has led projects securing over SGD 1.6 million in funding
- Published 70+ peer-reviewed articles
- Supervised 30+ undergraduate and 8 postgraduate theses
- Senior Editor for Systematic Reviews journal
- Associate Editor for Quality of Life Research journal
- Member of EuroQol Group, ISPOR, ISOQOL, PROMIS Health Organization

User message: "${messageToSend}"

Please respond naturally and helpfully as Dr Cheng's AI assistant. Keep responses concise but informative. If asked about collaboration or contacting Dr Cheng directly, suggest they can use the message form or email lingjie.cheng@npeu.ox.ac.uk.`);

        // Add assistant response
        const assistantMessage = {
          id: this.messageIdCounter++,
          sender: 'assistant',
          text: response,
          time: this.getCurrentTime()
        };
        this.messages.push(assistantMessage);
        
      } catch (error) {
        // Fallback response if Claude API fails
        const assistantMessage = {
          id: this.messageIdCounter++,
          sender: 'assistant',
          text: 'Thank you for your message! For detailed inquiries, I recommend using the message form or contacting Dr Cheng directly at lingjie.cheng@npeu.ox.ac.uk. Is there anything specific about his research or background I can help clarify?',
          time: this.getCurrentTime()
        };
        this.messages.push(assistantMessage);
      }
      
      this.isTyping = false;
      this.$nextTick(() => {
        this.scrollToBottom();
      });
    },
    async sendFormMessage() {
      if (!this.isFormValid || this.isSubmitting) return;
      
      this.isSubmitting = true;
      
      // Simulate sending email
      try {
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Reset form
        this.messageForm = {
          name: '',
          email: '',
          subject: '',
          message: ''
        };
        
        // Show success message
        alert('Message sent successfully! Dr Cheng will get back to you soon.');
        this.closeChatWidget();
        
      } catch (error) {
        alert('Failed to send message. Please try again or email directly.');
      } finally {
        this.isSubmitting = false;
      }
    },
    scrollToBottom() {
      if (this.$refs.chatMessages) {
        this.$refs.chatMessages.scrollTop = this.$refs.chatMessages.scrollHeight;
      }
    },
    handleInput() {
      // Could add typing indicators or other real-time features
    }
  },
  mounted() {
    // Simulate receiving a message after 5 seconds
    setTimeout(() => {
      if (!this.showChatWidget) {
        this.hasNewMessage = true;
      }
    }, 5000);
  }
}
</script>

<style scoped>
/* Original styles remain the same */
#intro {
  display: flex;
  align-items: center;
  gap: 40px;
  margin-bottom: 40px;
  min-height: 600px;
}

#intro-info {
  flex: 1.2;
  min-width: 0;
}

#intro-info h1 {
  font-size: 2.2em;
  margin-bottom: 12px;
  color: var(--primary-blue);
  line-height: 1.2;
}

#intro-info h2 {
  font-size: 1.2em;
  color: var(--text-medium);
  margin-bottom: 24px;
  font-weight: 500;
}

.intro-description {
  font-size: 1.05em;
  color: var(--text-dark);
  line-height: 1.7;
  margin-bottom: 18px;
  text-align: justify;
}

.intro-description a {
  color: var(--primary-blue);
}

.intro-img-block {
  flex: 0 0 380px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 20px;
}

.intro-img-block img {
  width: 380px;
  height: 480px;
  object-fit: cover;
  object-position: center 20%;
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(21, 76, 121, 0.15);
  border: 4px solid #e3e9f1;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.intro-img-block img:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(21, 76, 121, 0.2);
}

.social-links-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
  width: 100%;
  max-width: 420px;
}

.social-links {
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;
  justify-content: center;
  width: 100%;
}

.contact-link-row {
  display: flex;
  justify-content: center;
  width: 100%;
}

.social-link {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: white;
  border: 2px solid #e3e9f1;
  border-radius: 20px;
  text-decoration: none;
  font-size: 0.85em;
  font-weight: 500;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(21, 76, 121, 0.08);
  justify-content: center;
  min-width: 0;
  cursor: pointer;
}

.social-links .social-link {
  flex: 1;
  padding: 8px 10px;
  font-size: 0.8em;
}

.contact-link-row .social-link {
  padding: 10px 16px;
  font-size: 0.9em;
  min-width: 180px;
}

.social-link:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(21, 76, 121, 0.15);
}

.social-link svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.social-links .social-link svg {
  width: 14px;
  height: 14px;
}

.social-link span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.social-link.linkedin {
  color: #0077b5;
  border-color: #0077b5;
}

.social-link.linkedin:hover {
  background: #0077b5;
  color: white;
}

.social-link.researchgate {
  color: #00d0b6;
  border-color: #00d0b6;
}

.social-link.researchgate:hover {
  background: #00d0b6;
  color: white;
}

.social-link.scholar {
  color: #4285f4;
  border-color: #4285f4;
}

.social-link.scholar:hover {
  background: #4285f4;
  color: white;
}

.social-link.twitter {
  color: #1da1f2;
  border-color: #1da1f2;
}

.social-link.twitter:hover {
  background: #1da1f2;
  color: white;
}

.social-link.contact {
  color: var(--primary-blue);
  border-color: var(--primary-blue);
}

.social-link.contact:hover {
  background: var(--primary-blue);
  color: white;
}

h2 {
  color: var(--primary-blue);
  font-size: 1.25em;
  margin-bottom: 10px;
  border-left: 5px solid var(--primary-orange);
  padding-left: 10px;
}

.highlight-section {
  background: #f0f7fe;
  border-radius: 12px;
  padding: 28px 24px 20px 24px;
  margin-bottom: 36px;
  box-shadow: 0 2px 8px rgba(21, 76, 121, 0.06);
}

.highlight-section.appointments {
  background: #fef7e6;
}

.education-list,
.appointment-list {
  margin-left: 18px;
  margin-bottom: 10px;
}

.education-list li,
.appointment-list li {
  margin-bottom: 8px;
  line-height: 1.5;
}

.two-cols {
  display: flex;
  gap: 40px;
  flex-wrap: wrap;
}

.two-cols > div {
  flex: 1 1 300px;
  min-width: 250px;
}

.contact-location {
  background: var(--background-light);
  padding: 20px;
  border-radius: 10px;
  border-left: 4px solid var(--primary-blue);
  line-height: 1.6;
}

/* Chat Widget Styles */
.chat-widget-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  padding: 20px;
}

.chat-widget {
  width: 400px;
  max-width: 90vw;
  height: 600px;
  max-height: 80vh;
  background: white;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.chat-header {
  background: linear-gradient(135deg, #154c79 0%, #1e5a8a 100%);
  color: white;
  padding: 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.chat-header-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.chat-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.chat-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.chat-header-text h3 {
  margin: 0;
  font-size: 1em;
  font-weight: 600;
}

.chat-status {
  font-size: 0.8em;
  opacity: 0.9;
}

.chat-header-actions {
  display: flex;
  gap: 8px;
}

.mode-toggle,
.close-btn {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.mode-toggle:hover,
.close-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.mode-toggle svg,
.close-btn svg {
  width: 16px;
  height: 16px;
}

.chat-content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.chat-messages {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.message {
  display: flex;
}

.message.user {
  justify-content: flex-end;
}

.message.assistant {
  justify-content: flex-start;
}

.message-content {
  max-width: 80%;
  padding: 12px 16px;
  border-radius: 18px;
  position: relative;
}

.message.user .message-content {
  background: #154c79;
  color: white;
  border-bottom-right-radius: 4px;
}

.message.assistant .message-content {
  background: #f1f3f5;
  color: #333;
  border-bottom-left-radius: 4px;
}

.message-content p {
  margin: 0;
  line-height: 1.4;
}

.message-time {
  font-size: 0.7em;
  opacity: 0.7;
  display: block;
  margin-top: 4px;
}

.typing-indicator {
  display: flex;
  gap: 4px;
  align-items: center;
}

.typing-indicator span {
  width: 6px;
  height: 6px;
  background: #999;
  border-radius: 50%;
  animation: typing 1.4s infinite ease-in-out;
}

.typing-indicator span:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-indicator span:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typing {
  0%, 80%, 100% {
    transform: scale(0);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

.chat-input-area {
  padding: 20px;
  border-top: 1px solid #e1e5e9;
  background: #f8f9fa;
}

.chat-input-container {
  display: flex;
  gap: 12px;
  align-items: center;
}

.chat-input {
  flex: 1;
  padding: 12px 16px;
  border: 2px solid #e1e5e9;
  border-radius: 25px;
  outline: none;
  font-size: 0.9em;
  transition: border-color 0.2s;
}

.chat-input:focus {
  border-color: #154c79;
}

.chat-input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.send-btn {
  width: 40px;
  height: 40px;
  background: #154c79;
  border: none;
  border-radius: 50%;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}

.send-btn:hover:not(:disabled) {
  background: #1e5a8a;
  transform: scale(1.05);
}

.send-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.send-btn svg {
  width: 18px;
  height: 18px;
}

/* Message Form Styles */
.message-form {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 6px;
  font-weight: 500;
  color: #333;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #e1e5e9;
  border-radius: 8px;
  font-size: 0.9em;
  outline: none;
  transition: border-color 0.2s;
  resize: vertical;
}

.form-group input:focus,
.form-group textarea:focus {
  border-color: #154c79;
}

.submit-btn {
  width: 100%;
  padding: 14px;
  background: #154c79;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1em;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.submit-btn:hover:not(:disabled) {
  background: #1e5a8a;
}

.submit-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Floating Chat Button */
.floating-chat-btn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 60px;
  height: 60px;
  background: #154c79;
  border: none;
  border-radius: 50%;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(21, 76, 121, 0.3);
  transition: all 0.3s ease;
  z-index: 1000;
}

.floating-chat-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 12px 32px rgba(21, 76, 121, 0.4);
}

.floating-chat-btn svg {
  width: 24px;
  height: 24px;
}

.chat-notification {
  position: absolute;
  top: -5px;
  right: -5px;
  width: 20px;
  height: 20px;
  background: #ff4757;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8em;
  font-weight: bold;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

/* Responsive Design */
@media (max-width: 1024px) {
  .intro-img-block {
    flex: 0 0 320px;
  }
  
  .intro-img-block img {
    width: 320px;
    height: 400px;
  }
  
  #intro {
    gap: 30px;
  }
}

@media (max-width: 768px) {
  #intro {
    flex-direction: column;
    gap: 24px;
    align-items: center;
    min-height: auto;
  }

  .intro-img-block {
    flex: none;
    order: -1;
    padding-top: 0;
  }
  
  .intro-img-block img {
    width: 280px;
    height: 350px;
  }

  #intro-info {
    flex: none;
    width: 100%;
  }

  #intro-info h1 {
    text-align: center;
    font-size: 1.8em;
  }

  #intro-info h2 {
    text-align: center;
  }

  .intro-description {
    text-align: left;
  }

  .two-cols {
    flex-direction: column;
    gap: 20px;
  }
  
  .social-links-container {
    gap: 10px;
    max-width: 300px;
  }
  
  .social-links {
    gap: 6px;
  }
  
  .social-links .social-link {
    padding: 6px 8px;
    font-size: 0.75em;
  }
  
  .social-links .social-link svg {
    width: 12px;
    height: 12px;
  }
  
  .contact-link-row .social-link {
    padding: 8px 12px;
    font-size: 0.85em;
    min-width: 160px;
  }

  .chat-widget {
    width: 95vw;
    height: 90vh;
  }

  .floating-chat-btn {
    bottom: 20px;
    right: 20px;
    width: 55px;
    height: 55px;
  }
}

@media (max-width: 480px) {
  .intro-img-block img {
    width: 240px;
    height: 300px;
  }
  
  #intro-info h1 {
    font-size: 1.6em;
  }
  
  .social-links-container {
    max-width: 280px;
  }
  
  .social-links {
    gap: 4px;
  }
  
  .social-links .social-link {
    padding: 5px 6px;
    font-size: 0.7em;
  }
  
  .contact-link-row .social-link {
    padding: 7px 10px;
    font-size: 0.8em;
    min-width: 140px;
  }

  .chat-widget-overlay {
    padding: 10px;
  }

  .floating-chat-btn {
    width: 50px;
    height: 50px;
  }

  .floating-chat-btn svg {
    width: 20px;
    height: 20px;
  }
}

/* CSS Variables for consistent theming */
:root {
  --primary-blue: #154c79;
  --primary-orange: #ff6b35;
  --text-dark: #2c3e50;
  --text-medium: #576574;
  --background-light: #f8f9fa;
}
</style>
